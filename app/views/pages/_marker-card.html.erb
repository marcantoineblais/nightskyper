<div class="markers d-flex flex-column">
  <div class="marker-container d-flex">
    <% if marker.photo.present? %>
      <img class="marker-img" src="<%= marker.photo %>" alt="">
    <% else %>
      <img class="marker-img" src="https://images.pexels.com/photos/360912/pexels-photo-360912.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="">
    <% end %>
    <div class="marker-card">
      <div class="marker-content">
        <div class="d-flex justify-content-between">
          <h2><%= link_to marker.title, result_path(coordinates: [marker.longitude, marker.latitude]) %></h2>
          <% if marker.id && !marker.favorite?(current_user) %>
            <a href="<%= marker_favorites_path(marker) %>" data-method="post" class="add"><i class="fa-regular fa-heart fav-icon"></i></a>
          <% elsif marker.id && marker.favorite?(current_user) %>
            <a href="<%= marker_favorites_path(marker) %>" class="remove" data-method="delete" data-confirm="Delete this marker from you favorites?"> <i class="fa-solid fa-heart fav-icon"></i></a>
          <% end %>
        </div>
        <h3><%= marker.description %></h3>
          <div class="marker-bottom">
            <p> <%= marker.address.split(", ")[-6] %> - <%= marker.address.split(", ")[-3] %> - <%= marker.address.split(", ")[-2] %></p>

            <div class= "rating">
              <% marker.average_rating.times do %>
                <span class="fa fa-star checked"></span>
              <% end %>
              <% unchecked = 5 - marker.average_rating %>
              <% unchecked.times do %>
                <span class="fa-solid fa-star unchecked"></span>
              <% end %>
            </div>

          </div>
      </div>
    </div>
  </div>
</div>
